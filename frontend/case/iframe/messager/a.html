<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>跨域传输数据</title>
    <script src="messager.js"></script>
</head>
<body>
    <button id="button">post</button>
    <iframe id="frame" src="http://backtonaturedemo.github.io/frontend/case/iframe/messager/b.html"></iframe>
   <script>
        var frame = document.getElementById("frame");
        var messager = new Messager("changyan", frame.contentWindow, 'parent');
        messager.listen(function(msg){
            alert('I am a'+ msg);
        });
        var  data1 = '{"code":304,"data":[{"appid":"我

爱","comment_0":156830,"comment_10":841,"comment_43":1582,"comment_60":685,"comment_96":433749,"comment_audited_0":110957,"c

omment_audited_10":449,"comment_audited_43":987,"comment_audited_60":487,"comment_audited_96":433749,"time":"20141217","topi

c_0":9474,"topic_10":561,"topic_43":766,"topic_60":374,"topic_96":24,"topic_audited_0":6815,"topic_audited_10":295,"topic_au

dited_43":526,"topic_audited_60":280,"topic_audited_96":24,"user_0":54132,"user_10":707,"user_43":847,"user_60":369,"user_96

":47417,"user_audited_0":32270,"user_audited_10":413,"user_audited_43":602,"user_audited_60":276,"user_audited_96":47417}],"

message":"success"}';
        var data2 = 'data from a';
        document.getElementById('button').onclick = function () {
            messager.post(data2, 'frame');
				for( var x in parent.navigator.listenFunc) {
			//alert(x);
		}
        };
    </script>
</body>
</html>